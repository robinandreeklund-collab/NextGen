# üöÄ NextGen AI Trader

Ett sj√§lvreflekterande, modul√§rt och RL-drivet handelssystem byggt f√∂r transparens, agentutveckling och realtidsanalys. Systemet simulerar handel med verkliga data, strategier, feedbackloopar och bel√∂ningsbaserad inl√§rning.

## üéØ Snabbstart

### üÜï K√∂r Fullskalig Dashboard (Rekommenderat)
```bash
# Demo-l√§ge (simulerad data)
python start_demo.py

# Live-l√§ge (WebSocket streaming)
python start_live.py

# √ñppna http://localhost:8050 i webbl√§saren
```

**‚ö†Ô∏è VIKTIGT: Data Integrity Policy**

Dashboarden √§r designad f√∂r att visa **ENDAST verklig data fr√•n systemets moduler och message_bus**. 

**F√∂rbjudet:**
- ‚ùå H√•rdkodade v√§rden i dashboard-paneler
- ‚ùå Mockup-data eller randomv√§rden i visualiseringar
- ‚ùå UI-genererade metrics (alla metrics ska komma fr√•n moduler)
- ‚ùå Statiska siffror i grafer eller tabeller

**Till√•tet:**
- ‚úÖ Data fr√•n `data_ingestion_sim.py` (demo-l√§ge)
- ‚úÖ Data fr√•n `data_ingestion.py` (live-l√§ge)
- ‚úÖ Metrics fr√•n portfolio_manager, rl_controller, dqn_controller, etc.
- ‚úÖ Real-time data via message_bus

**Datafl√∂de:**
```
Demo-l√§ge:  data_ingestion_sim ‚Üí message_bus ‚Üí modules ‚Üí dashboard
Live-l√§ge:  data_ingestion (Finnhub) ‚Üí message_bus ‚Üí modules ‚Üí dashboard
```

Alla paneler och visualiseringar m√•ste reflektera systemets faktiska tillst√•nd!

### K√∂r Analyzer Debug Dashboard
```bash
python analyzer_debug.py
# √ñppna http://localhost:8050 i webbl√§saren
```

### K√∂r Simulering
```bash
python sim_test.py
```

### K√∂r Tester
```bash
pytest tests/ -v
```

---

## üìä Fullskalig NextGen Dashboard

**start_demo.py / start_live.py** - Omfattande full-scale dashboard f√∂r hela NextGen projektet.

### √ñversikt

Fullskalig dashboard byggd enligt `docs/dashboard_structure_sprint8.yaml` med modern design inspirerad av "Abstire Dashboard". Inneh√•ller alla 10 huvudpaneler f√∂r komplett system√∂vervakning och kontroll.

### Starta Dashboard

**Demo-l√§ge (Simulerad data):**
```bash
python start_demo.py
# Startar med simulerad realtidsdata fr√•n data_ingestion_sim.py
# Genererar realistiska prisr√∂relser med trend, volatilitet och mean reversion
# Publicerar data via message_bus till alla moduler
# Ingen WebSocket-anslutning kr√§vs
```

**Live-l√§ge (Real-time data):**
```bash
python start_live.py
# Ansluter till Finnhub WebSocket f√∂r live marknadsdata
# Anv√§nder data_ingestion.py f√∂r att h√§mta data fr√•n Finnhub API
# Kr√§ver giltig Finnhub API-nyckel
```

√ñppna sedan `http://localhost:8050` i webbl√§saren.

**Datak√§llor:**

Alla dashboardpaneler anv√§nder **ENDAST** data fr√•n:

1. **Market Data**: 
   - Demo: `data_ingestion_sim.py` ‚Üí `market_data` topic
   - Live: `data_ingestion.py` ‚Üí `market_data` topic

2. **Portfolio Metrics**:
   - `portfolio_manager.py` ‚Üí portfolio value, cash, positions, ROI

3. **RL Agent Metrics**:
   - `rl_controller.py` ‚Üí PPO rewards, agent actions
   - `dqn_controller.py` ‚Üí DQN rewards, epsilon, actions

4. **Evolution Metrics**:
   - `gan_evolution_engine.py` ‚Üí generator loss, discriminator loss, acceptance rate

5. **Pattern Detection**:
   - `gnn_timespan_analyzer.py` ‚Üí pattern types, confidence levels

6. **Reward Flow**:
   - `reward_tuner.py` ‚Üí base rewards, tuned rewards

7. **Conflicts**:
   - Decision history ‚Üí PPO vs DQN conflicts

**Inga h√•rdkodade v√§rden eller mockup-data anv√§nds!**

---

## üéØ Finnhub Orchestrator

**Ny i Sprint 9** - Central orchestrator f√∂r koordination av datafl√∂den fr√•n Finnhub.

### √ñversikt

Finnhub Orchestrator √§r en central modul som koordinerar alla aspekter av datainsamling, symbolrotation, indikatorsyntes och RL-driven optimering. Designad f√∂r skalbarhet och flexibilitet med plug-n-play-arkitektur.

### Huvudfunktioner

1. **RL-Driven Symbolprioritering**
   - Automatisk prioritering av symboler baserat p√• RL-feedback
   - Dynamisk justering av symbolval f√∂r optimal portf√∂ljprestanda
   - Integration med PPO och DQN controllers

2. **Adaptiv Symbolrotation**
   - Tid-baserad rotation
   - Prestanda-baserad rotation
   - RL-rekommenderad rotation
   - Marknadsregim-driven rotation

3. **Indikatorsyntes**
   - Kombinerar flera indikatorer till syntetiska metrics
   - Momentum composite (RSI + MACD + Stochastic)
   - Volatilitet composite (ATR + Bollinger Width)
   - Trend strength (ADX + MACD histogram)
   - Divergens-detektering

4. **Stream Replay Engine**
   - Historisk datareprisering f√∂r test
   - Syntetisk datagenerering
   - Hybrid-l√§ge (mix av verklig och syntetisk data)
   - Konfigurerbar replay-hastighet (0.1x - 10x)

5. **Stream Ontology Mapper**
   - Normaliserar data fr√•n olika k√§llor (Finnhub, Yahoo, Alpha Vantage)
   - Enhetlig dataschema f√∂r downstream-moduler
   - Datavalidering och typkonvertering

6. **Infrastruktur**
   - Audit logging till `logs/orchestrator_audit.json`
   - Rate limiting (10 req/s med burst support)
   - Failover med retry-logik
   - Health monitoring

### Submoduler

#### 1. **IndicatorSynthEngine**
Synthesiserar indikatorkombinationer och h√§rledda metrics.

```python
from modules.indicator_synth_engine import IndicatorSynthEngine

engine = IndicatorSynthEngine(message_bus)
synthetic_indicators = engine.synthesize(['AAPL', 'TSLA'])
```

#### 2. **SymbolRotationEngine**
Hanterar symbolrotation baserat p√• prioriteringar och strategier.

```python
from modules.symbol_rotation_engine import SymbolRotationEngine

rotation_engine = SymbolRotationEngine(message_bus, rotation_interval=300)
new_symbols = rotation_engine.rotate_symbols(
    current_symbols=['AAPL', 'TSLA'],
    priorities={'AAPL': 0.8, 'TSLA': 0.3},
    strategy={'type': 'top_priority', 'rotation_rate': 0.3},
    max_symbols=10
)
```

#### 3. **RotationStrategyEngine**
Best√§mmer rotationsstrategier baserat p√• RL-feedback och prestanda.

```python
from modules.rotation_strategy_engine import RotationStrategyEngine

strategy_engine = RotationStrategyEngine(message_bus)
strategy = strategy_engine.compute_rotation_strategy(
    priorities={'AAPL': 0.6, 'TSLA': 0.4},
    metrics={},
    current_symbols=['AAPL', 'TSLA']
)
```

#### 4. **StreamStrategyAgent**
RL-agent som optimerar streaming-strategier och resursallokering.

```python
from modules.stream_strategy_agent import StreamStrategyAgent

agent = StreamStrategyAgent(message_bus)
scores = agent.get_symbol_scores(['AAPL', 'TSLA'], metrics={})
strategy = agent.update_strategy(metrics={}, priorities={'AAPL': 0.7})
```

#### 5. **StreamReplayEngine**
Repriserar historisk eller syntetisk data f√∂r simulering och testning.

```python
from modules.stream_replay_engine import StreamReplayEngine

replay_engine = StreamReplayEngine(message_bus)
replay_engine.start_replay({
    'mode': 'historical',  # eller 'synthetic', 'hybrid'
    'speed': 2.0,
    'symbols': ['AAPL', 'TSLA']
})
```

#### 6. **StreamOntologyMapper**
Mappar och normaliserar data fr√•n olika k√§llor.

```python
from modules.stream_ontology_mapper import StreamOntologyMapper

mapper = StreamOntologyMapper(message_bus)
normalized_data = mapper.map_data(
    {'p': 150.5, 's': 'AAPL', 't': 1234567890000, 'v': 1000000},
    source='finnhub'
)
```

### Anv√§ndning

#### Starta Orchestrator

```python
from modules.finnhub_orchestrator import FinnhubOrchestrator
from modules.message_bus import MessageBus

message_bus = MessageBus()
orchestrator = FinnhubOrchestrator(
    api_key='your_finnhub_api_key',
    message_bus=message_bus,
    live_mode=False  # False f√∂r demo, True f√∂r live
)

# Starta orchestrator
orchestrator.start()

# Orchestratorn k√∂r nu i bakgrunden och:
# - Roterar symboler automatiskt
# - Uppdaterar RL-prioriteringar
# - Synthesiserar indikatorer
# - Publicerar metrics till message_bus
```

#### Dynamisk Konfiguration

```python
# Uppdatera konfiguration under k√∂rning
orchestrator.update_config({
    'rotation_interval': 600,  # 10 minuter
    'max_concurrent_streams': 15,
    'adaptive_params': {
        'rotation_threshold': 0.7,
        'batch_size': 20
    }
})
```

#### Replay-L√§ge

```python
# Aktivera replay f√∂r test/simulering
orchestrator.enable_replay_mode({
    'mode': 'synthetic',
    'speed': 5.0,  # 5x hastighet
    'symbols': ['AAPL', 'TSLA', 'GOOGL']
})

# St√§ng av replay
orchestrator.disable_replay_mode()
```

### Dashboard-Integration

Orchestratorn har en dedikerad panel i dashboarden som visar:

1. **Status** - K√∂rstatus, l√§ge (Live/Demo), aktiva symboler
2. **Symbol Rotation Timeline** - Visualisering av rotationsh√§ndelser
3. **RL-Driven Priorities** - Bar chart med symbolprioriteter
4. **Stream Health** - Gauge som visar systemh√§lsa
5. **Replay Status** - Status f√∂r replay engine

**Navigera till Orchestrator-panelen:**
- Starta dashboarden: `python start_demo.py`
- √ñppna webbl√§saren: `http://localhost:8050`
- Klicka p√• "üéØ Orchestrator" i sidomenyn

### Datafl√∂de

```
Finnhub API/WebSocket
        ‚Üì
StreamOntologyMapper (normalisering)
        ‚Üì
FinnhubOrchestrator
        ‚îú‚îÄ‚îÄ IndicatorSynthEngine ‚Üí Syntetiska indikatorer
        ‚îú‚îÄ‚îÄ SymbolRotationEngine ‚Üí Symbolval
        ‚îú‚îÄ‚îÄ RotationStrategyEngine ‚Üí Strategibeslut
        ‚îú‚îÄ‚îÄ StreamStrategyAgent ‚Üí RL-optimering
        ‚îî‚îÄ‚îÄ StreamReplayEngine ‚Üí Test/Simulering
        ‚Üì
message_bus (topics: orchestrator_status, symbol_rotation, rl_scores, etc.)
        ‚Üì
Downstream Modules (indicator_registry, strategy_engine, etc.)
```

### Message Bus Topics

Orchestratorn publicerar till f√∂ljande topics:

- **orchestrator_status** - H√§lsa och metrics
- **symbol_rotation** - Rotationsh√§ndelser
- **stream_metrics** - Prestanda data
- **rl_scores** - Symbolprioriteter
- **replay_data** - Repriserad data
- **indicator_synth_data** - Syntetiska indikatorer
- **mapped_data** - Normaliserad data

Och prenumererar p√•:

- **rl_feedback** - Feedback fr√•n RL controllers
- **market_conditions** - Marknadsl√§ges√§ndringar
- **module_requests** - F√∂rfr√•gningar fr√•n moduler

### Konfiguration

Standardkonfiguration finns i `docs/finnhub_orchestrator.yaml`. Viktiga parametrar:

```yaml
configuration:
  default_symbols: ["AAPL", "TSLA", "MSFT", "GOOGL", "AMZN"]
  rotation_interval: 300  # sekunder
  max_concurrent_streams: 10
  buffer_size: 1000
  priority_update_interval: 60

adaptive_parameters:
  rotation_threshold: 0.5  # (0.1 - 0.9)
  batch_size: 10  # (1 - 100)
  priority_weight: 0.7  # (0.0 - 1.0)
  replay_speed: 1.0  # (0.1 - 10.0)
```

### Testning

Omfattande testsvit med 25 tester t√§cker alla aspekter:

```bash
# K√∂r orchestrator-tester
pytest tests/test_finnhub_orchestrator.py -v

# Resultat: 25/25 tester passerar
```

Tester inkluderar:
- Initialisering av alla submoduler
- Symbolrotation (priority-based, random, hybrid)
- Indikatorsyntes
- RL-strategioptimering
- Replay engine (start/stop, speed adjustment)
- Data mapping och normalisering
- Message bus integration
- Dynamisk konfiguration

### Plug-n-Play Design

Orchestratorn √§r designad f√∂r att kunna k√∂ras b√•de frist√•ende och integrerat:

**Frist√•ende:**
```python
# K√∂r orchestrator isolerat
orchestrator = FinnhubOrchestrator(api_key, message_bus, live_mode=False)
orchestrator.start()
# Orchestratorn k√∂r sin egen loop och publicerar data
```

**Integrerat:**
```python
# Automatiskt integrerat i dashboard
# start_demo.py och start_live.py startar orchestratorn automatiskt
```

**Inga h√•rdkodade v√§rden eller mockup-data anv√§nds!**

### Dashboard-paneler

Dashboard inneh√•ller 10 huvudpaneler baserade p√• YAML-specifikationerna:

#### 1. **Portfolio**
- Portf√∂lj√∂versikt med total v√§rde, cash, holdings och ROI
- Realtidsuppdateringar av portf√∂ljv√§rde
- Positionsvisualisering
- P&L-tracking

#### 2. **RL Agent Analysis**
- Hybrid RL-j√§mf√∂relse: PPO vs DQN prestanda
- Reward flow-visualisering (base ‚Üí tuned ‚Üí PPO/DQN)
- DQN-specifika metriker (epsilon, loss, buffer)
- Epsilon decay schedule
- Training progress f√∂r b√•da agentsystem

#### 3. **Agent Evolution & GAN**
- GAN generator/discriminator loss-kurvor
- Kandidatacceptans-gauge
- Agentevolutions-tidslinje
- Candidate distribution histogram
- Deployment timeline f√∂r nya agenter

#### 4. **Temporal Drift & GNN**
- GNN pattern detection (8 m√∂nstertyper)
- Pattern confidence charts
- Temporal graph visualization
- Pattern timeline med Gantt-diagram
- Success rate per pattern
- Temporal insights och rekommendationer

#### 5. **Feedback & Reward Loop**
- Reward transformation visualization
- Base vs tuned reward comparison
- Volatility och overfitting tracking
- Feedback flow mellan moduler
- Transformation ratio √∂ver tid

#### 6. **CI Test Results**
- Test suite overview (314 tester)
- Pass/fail metrics
- Coverage tracking (85%+)
- Test results breakdown
- Sprint-specific test status

#### 7. **RL Conflict Monitor**
- PPO vs DQN konfliktfrekvens
- Resolution strategy breakdown
- Conflict details table
- Parameter conflicts vs decision conflicts
- Outcome tracking f√∂r olika resolutions

#### 8. **Decision & Consensus**
- Consensus model visualization
- Voting matrix heatmap
- Decision robustness metrics
- Agent agreement rates
- Consensus confidence √∂ver tid

#### 9. **Adaptive Settings**
- 16+ adaptiva parametrar live-tracking
- Parameter evolution √∂ver tid
- Manuella overrides (sliders)
- DQN epsilon control
- GAN threshold adjustment
- Parameter groups visualization

#### 10. **Live Market Watch**
- Real-time prisdiagram f√∂r alla symboler
- Tekniska indikatorer (RSI, MACD, ATR)
- Volume och trend analysis
- Market sentiment indicators

### Design och Tema

Dashboard anv√§nder ett modernt dark theme inspirerat av "Abstire Dashboard" mockup:

**F√§rgschema:**
- **Background:** `#0a0e1a` (djup m√∂rk bl√•)
- **Surface:** `#141b2d` (m√∂rk panel)
- **Primary:** `#4dabf7` (ljusbl√• f√∂r accenter)
- **Secondary:** `#845ef7` (lila f√∂r sekund√§ra element)
- **Success:** `#51cf66` (gr√∂n f√∂r positiva v√§rden)
- **Warning:** `#ffd43b` (gul f√∂r varningar)
- **Danger:** `#ff6b6b` (r√∂d f√∂r fel/kritiska v√§rden)

**Komponenter:**
- **Top Header:** Systemstatus, mode (Demo/Live), realtidsklocka
- **Sidebar:** Quick stats, module status, navigation, Start/Stop knappar, statusindikator
- **Tab Navigation:** 10 paneler med smooth √∂verg√•ngar
- **Responsive Design:** Funkar p√• desktop, tablet och mobile

### Funktioner

**Realtidsuppdateringar:**
- Auto-refresh var 2:a sekund
- WebSocket streaming i live-l√§ge
- Smooth chart animations

**Interaktiva kontroller:**
- Start/stop simulation
- Parameter overrides via sliders
- Tab navigation mellan paneler
- Expandable charts

**Modul√§r arkitektur:**
- Separata paneler f√∂r varje systemdel
- √Öteranv√§ndbara chart-komponenter
- Enhetlig styling via tema-system

### Arkitektur

Dashboard implementerar f√∂ljande struktur:

```
start_demo.py / start_live.py
    ‚Üì
NextGenDashboard (start_dashboard.py)
    ‚îú‚îÄ‚îÄ Module Initialization (Sprint 1-8)
    ‚îú‚îÄ‚îÄ Layout Creation
    ‚îÇ   ‚îú‚îÄ‚îÄ Top Header
    ‚îÇ   ‚îú‚îÄ‚îÄ Sidebar
    ‚îÇ   ‚îú‚îÄ‚îÄ Control Panel
    ‚îÇ   ‚îî‚îÄ‚îÄ Tab Content (10 paneler)
    ‚îú‚îÄ‚îÄ Callbacks
    ‚îÇ   ‚îú‚îÄ‚îÄ Tab rendering
    ‚îÇ   ‚îú‚îÄ‚îÄ Start/stop control
    ‚îÇ   ‚îú‚îÄ‚îÄ Auto-refresh
    ‚îÇ   ‚îî‚îÄ‚îÄ Sidebar updates
    ‚îî‚îÄ‚îÄ Simulation Loop (demo) / WebSocket (live)
```

### YAML-referenser

Dashboard implementerar specifikationer fr√•n:
- `docs/dashboard_structure_sprint8.yaml` - Huvudstruktur och paneler
- `docs/adaptive_parameters_sprint8.yaml` - Adaptiva parametrar
- `docs/sprint_8.yaml` - Sprint 8 funktioner
- `docs/ci_pipeline_sprint8.yaml` - CI/CD integration

### Teknisk Stack

- **Backend:** Python 3.12+
- **Dashboard:** Dash 3.2+ och Plotly 6.3+
- **Styling:** Inline CSS med tema-system
- **Real-time:** WebSocket-client f√∂r live data
- **Threading:** Async simulation loop

### Anv√§ndningsexempel

**Starta i demo-l√§ge och √∂vervaka systemet:**
```bash
# Terminal 1: Starta dashboard
python start_demo.py

# Terminal 2: √ñppna browser
# Navigera till http://localhost:8050
# Simuleringen startar automatiskt i demo-l√§ge
# V√§xla mellan paneler f√∂r att se olika aspekter
```

**Live trading med WebSocket:**
```bash
# S√§tt API-nyckel (om inte redan i koden)
export FINNHUB_API_KEY="your_api_key_here"

# Starta live dashboard
python start_live.py

# Dashboard ansluter automatiskt till Finnhub WebSocket
# Real-time marknadsdata visas i Live Market Watch panel
```

### Troubleshooting

**Dashboard startar inte:**
```bash
# Kontrollera dependencies
pip install -r requirements.txt

# Testa import
python -c "from start_dashboard import NextGenDashboard; print('OK')"
```

**Inga data visas:**
- Klicka "Start" knappen i control panel
- Kontrollera att simulation loop k√∂rs (check console output)
- Verifiera att moduler √§r initialiserade korrekt

**WebSocket fel i live-l√§ge:**
- Kontrollera Finnhub API-nyckel
- Verifiera internet-anslutning
- Kolla att Finnhub-tj√§nsten √§r tillg√§nglig

---

## üìç Sprintstatus

| Sprint | Status | Beskrivning |
|--------|--------|-------------|
| Sprint 1 | ‚úÖ F√§rdig | K√§rnsystem och demoportf√∂lj |
| Sprint 2 | ‚úÖ F√§rdig | RL och bel√∂ningsfl√∂de |
| Sprint 3 | ‚úÖ F√§rdig | Feedbackloopar och introspektion |
| Sprint 4 | ‚úÖ F√§rdig | Strategiskt minne och agentutveckling |
| Sprint 4.2 | ‚úÖ F√§rdig | Adaptiv parameterstyrning via RL/PPO |
| Sprint 4.3 | ‚úÖ F√§rdig | Full adaptiv parameterstyrning i alla moduler |
| Sprint 4.4 | ‚úÖ F√§rdig | Meta-bel√∂ningsjustering via RewardTunerAgent |
| Sprint 5 | ‚úÖ F√§rdig | Simulering och konsensus |
| Sprint 6 | ‚úÖ F√§rdig | Tidsanalys och action chains |
| Sprint 7 | ‚úÖ F√§rdig | Indikatorvisualisering och system√∂versikt |
| Sprint 8 | ‚úÖ F√§rdig | DQN, GAN, GNN ‚Äì Hybridiserad RL & Temporal Intelligence |
| Sprint 9 | ‚úÖ F√§rdig | Finnhub Orchestrator ‚Äì Central datakoordinering och RL-driven symbolrotation |
| Sprint 10 | ‚úÖ F√§rdig | Decision Transformer ‚Äì Sequence-based RL & 5-agent ensemble |

**Testresultat:** ‚úÖ 396/396 tester passerar (100%)

---

## üîç Analyzer Debug Dashboard

**analyzer_debug.py** - Omfattande debug- och analysdashboard f√∂r hela NextGen systemet.

### Funktioner

Dashboard med 6 huvudsektioner:

1. **System Overview**
   - Systemh√§lsa (health score 0-100%)
   - Modulstatus (aktiva/stale moduler)
   - Realtids√∂vervakning av alla komponenter

2. **Data Flow & Simulation**
   - Prisutveckling f√∂r alla symboler
   - Tekniska indikatorer (RSI, MACD, ATR)
   - Beslutsfl√∂de (decisions, executions, success rate)

3. **RL Analysis**
   - Reward flow (base vs tuned rewards, Sprint 4.4)
   - Parameter evolution (adaptiva parametrar, Sprint 4.3)
   - Agent performance (training loss per agent)

4. **Agent Development**
   - Agent evolution (versioner √∂ver tid)
   - Agent metriker (performance per agent)
   - Evolutionshistorik

5. **Debug & Logging**
   - Event log (realtidslogg av alla events)
   - Feedback flow (visualisering av feedback)
   - Timeline analysis (Sprint 6)

6. **Portfolio**
   - Portfolio v√§rde (cash, holdings, total)
   - Positioner (nuvarande innehav)
   - P&L och ROI

### Anv√§ndning

```bash
# Starta dashboarden
python analyzer_debug.py

# √ñppna webbl√§saren p√•
http://localhost:8050
```

**Kontroller:**
- Start Simulation: Startar simulerad trading
- Stop Simulation: Stoppar simulering
- Auto-refresh: Uppdaterar var 2:a sekund

**Datak√§llor:**
- √Öteranv√§nder kod fr√•n sim_test.py f√∂r datainmatning
- Integrerar med alla moduler via message_bus
- Realtidsdata fr√•n introspection_panel, system_monitor, RL-controller

---

## üì¶ System√∂versikt

### K√§rnmoduler

| Modul | Beskrivning | Sprint |
|-------|-------------|--------|
| `analyzer_debug.py` | Debug dashboard med fullst√§ndig systemvisualisering | Sprint 7 |
| `finnhub_orchestrator.py` | Central orchestrator f√∂r datakoordinering och RL-driven rotation | Sprint 9 |
| `indicator_synth_engine.py` | Synthesiserar indikatorkombinationer | Sprint 9 |
| `symbol_rotation_engine.py` | Hanterar symbolrotation | Sprint 9 |
| `rotation_strategy_engine.py` | RL-driven rotationsstrategi | Sprint 9 |
| `stream_strategy_agent.py` | RL-agent f√∂r streaming-optimering | Sprint 9 |
| `stream_replay_engine.py` | Reprisering av historisk data | Sprint 9 |
| `stream_ontology_mapper.py` | Datanormalisering fr√•n olika k√§llor | Sprint 9 |
| `decision_transformer_agent.py` | Decision Transformer f√∂r sequence-based RL | Sprint 10 |
| `ensemble_coordinator.py` | Koordinerar 5-agent ensemble (PPO, DQN, DT, GAN, GNN) | Sprint 10 |
| `data_ingestion.py` | WebSocket-datafl√∂de fr√•n Finnhub | Sprint 1 |
| `data_ingestion_sim.py` | Simulerad marknadsdata f√∂r demo-l√§ge | Sprint 1 |
| `strategy_engine.py` | Genererar tradef√∂rslag baserat p√• indikatorer | Sprint 1-2 |
| `risk_manager.py` | Riskbed√∂mning och justering | Sprint 1-2 |
| `decision_engine.py` | Fattar handelsbeslut | Sprint 1-2 |
| `execution_engine.py` | Exekverar trades | Sprint 1 |
| `portfolio_manager.py` | Hanterar portf√∂lj och genererar rewards | Sprint 1, 4.4 |
| `rl_controller.py` | PPO-agenttr√§ning och distribution | Sprint 2, 4.2 |
| `reward_tuner.py` | Meta-bel√∂ningsjustering | Sprint 4.4 |
| `vote_engine.py` | Agentr√∂stning | Sprint 4.3, 5 |
| `consensus_engine.py` | Konsensusbeslut | Sprint 5 |
| `decision_simulator.py` | Beslutssimuleringar | Sprint 5 |
| `timespan_tracker.py` | Timeline-analys | Sprint 6 |
| `action_chain_engine.py` | √Öteranv√§ndbara beslutskedjor | Sprint 6 |
| `system_monitor.py` | Systemh√§lso√∂vervakning | Sprint 6 |
| `dqn_controller.py` | DQN reinforcement learning med experience replay | Sprint 8 |
| `gan_evolution_engine.py` | GAN f√∂r agentevolution och kandidatgenerering | Sprint 8 |
| `gnn_timespan_analyzer.py` | Graph Neural Network f√∂r temporal analys | Sprint 8 |
| `strategic_memory_engine.py` | Beslutshistorik och analys | Sprint 4 |
| `meta_agent_evolution_engine.py` | Agentevolution | Sprint 4 |
| `agent_manager.py` | Agentprofiler och versioner | Sprint 4, 10 |
| `feedback_router.py` | Intelligent feedback-routing | Sprint 3 |
| `feedback_analyzer.py` | M√∂nsteranalys i feedback | Sprint 3 |
| `introspection_panel.py` | Dashboard-data f√∂r visualisering | Sprint 3, 7 |

### Adaptiva Parametrar

Systemet har **23+ adaptiva parametrar** som justeras automatiskt via RL/PPO:

**Sprint 10 (Decision Transformer):**
- dt_learning_rate (0.00001-0.001)
- dt_sequence_length (10-50)
- dt_num_layers (2-6)
- dt_target_return_weight (0.5-2.0)
- dt_embed_dim (64-256)
- dt_num_heads (2-8)
- dt_dropout (0.0-0.3)

**Sprint 4.4 (RewardTunerAgent):**
- reward_scaling_factor (0.5-2.0)
- volatility_penalty_weight (0.0-1.0)
- overfitting_detector_threshold (0.05-0.5)

**Sprint 4.2 (Meta-parametrar):**
- evolution_threshold (0.05-0.5)
- min_samples (5-50)
- update_frequency (1-100)
- agent_entropy_threshold (0.1-0.9)

**Sprint 4.3 (Modulparametrar):**
- signal_threshold (0.1-0.9) - Strategy Engine
- indicator_weighting (0.0-1.0) - Strategy Engine
- risk_tolerance (0.01-0.5) - Risk Manager
- max_drawdown (0.01-0.3) - Risk Manager
- consensus_threshold (0.5-1.0) - Decision Engine
- memory_weighting (0.0-1.0) - Decision Engine
- agent_vote_weight (0.1-2.0) - Vote Engine
- execution_delay (0-10) - Execution Engine
- slippage_tolerance (0.001-0.05) - Execution Engine

---

## üèóÔ∏è Systemarkitektur

### Datafl√∂de

```
Market Data (Finnhub API/WebSocket)
        ‚Üì
StreamOntologyMapper (normalisering)
        ‚Üì
FinnhubOrchestrator
        ‚îú‚îÄ‚îÄ SymbolRotationEngine (dynamisk symbolval)
        ‚îú‚îÄ‚îÄ IndicatorSynthEngine (syntetiska indikatorer)
        ‚îú‚îÄ‚îÄ RotationStrategyEngine (RL-driven strategi)
        ‚îî‚îÄ‚îÄ StreamStrategyAgent (RL-optimering)
        ‚Üì
message_bus ‚Üí orchestrator_status, symbol_rotation, rl_scores
        ‚Üì
Data Ingestion ‚Üí Indicators
        ‚Üì
Strategy Engine ‚Üê RL Controller
        ‚Üì
Risk Manager
        ‚Üì
Decision Engine ‚Üê Memory/Voting
        ‚Üì
Execution Engine
        ‚Üì
Portfolio Manager ‚Üí Base Reward
        ‚Üì
Reward Tuner ‚Üí Tuned Reward
        ‚Üì
RL Controller ‚Üí Agent Updates
```

### Demo-l√§ge Datafl√∂de (data_ingestion_sim.py)

```
data_ingestion_sim.simulate_market_tick()
    ‚Üì publicerar market_data
message_bus
    ‚Üì distribuerar till
[indicator_registry, strategy_engine, portfolio_manager, ...]
    ‚Üì processerar och publicerar resultat
message_bus
    ‚Üì distribuerar till
dashboard (visualisering)
```

**Viktig princip:** ALL data som visas i dashboarden kommer fr√•n message_bus topics som publicerats av modulerna. Ingen data genereras direkt i UI-lagret.

### Reward Flow (Sprint 4.4)

RewardTunerAgent transformerar volatila portfolio rewards till stabila RL-signaler:

1. **Portfolio Manager** ‚Üí base_reward (r√•data)
2. **Reward Tuner** ‚Üí analys och transformation
   - Ber√§kna volatilitet
   - Detektera overfitting
   - Applicera penalties
   - Skala med reward_scaling_factor
3. **RL Controller** ‚Üí tuned_reward (stabil signal)

**Transformation Ratio:** 0.67 genomsnitt (33% reduktion vid h√∂g volatilitet)

## üöÄ Kom ig√•ng

### Installation

```bash
# Klona repositoryt
git clone https://github.com/robinandreeklund-collab/NextGen.git
cd NextGen

# Installera dependencies
pip install -r requirements.txt

# K√∂r tester
pytest tests/ -v
```

### Snabbstart

```bash
# 1. Starta debug-dashboarden (rekommenderat)
python analyzer_debug.py
# ‚Üí √ñppna http://localhost:8050

# 2. K√∂r simulering i terminal
python sim_test.py

# 3. K√∂r med live WebSocket-data (kr√§ver Finnhub API-nyckel)
python websocket_test.py
```

---

## üé® Funktioner

### üîç Analyzer Debug Dashboard
- Realtidsvisualisering av hela systemet
- 6 sektioner: System, Data Flow, RL Analysis, Agent Development, Debug, Portfolio
- Start/stop kontroller f√∂r simulering
- Auto-refresh var 2:a sekund

### ü§ñ Adaptiv RL-optimering
- **16 adaptiva parametrar** som justeras automatiskt via PPO
- Reward transformation f√∂r stabil tr√§ning (Sprint 4.4)
- Meta-parameterstyrning (Sprint 4.2, 4.3)
- Agent evolution och versionshantering (Sprint 4)

### üó≥Ô∏è Konsensusbeslutsfattande
- Simulering av alternativa beslut (Sprint 5)
- R√∂stmatris med viktning (Sprint 5)
- 4 konsensusmodeller: Majority, Weighted, Unanimous, Threshold

### ‚è∞ Timeline och Action Chains
- Tidsbaserad sp√•rning av beslut (Sprint 6)
- √Öteranv√§ndbara beslutskedjor (Sprint 6)
- Systemh√§lso√∂vervakning (Sprint 6)

### üìä Omfattande indikatorst√∂d
- Tekniska: RSI, MACD, ATR, Bollinger Bands, ADX, Stochastic
- Fundamentala: EPS, ROE, ROA, Analyst Ratings, Earnings
- Alternativa: News Sentiment, Insider Sentiment, ESG Score

---

## üìÅ Projektstruktur

```
NextGen/
‚îú‚îÄ‚îÄ start_dashboard.py           # üÜï Fullskalig dashboard (main)
‚îú‚îÄ‚îÄ start_demo.py                # üÜï Starta i demo-l√§ge (anv√§nder data_ingestion_sim)
‚îú‚îÄ‚îÄ start_live.py                # üÜï Starta i live-l√§ge (anv√§nder data_ingestion)
‚îú‚îÄ‚îÄ analyzer_debug.py            # Debug dashboard (legacy)
‚îú‚îÄ‚îÄ sim_test.py                  # Simulerad trading
‚îú‚îÄ‚îÄ websocket_test.py            # Live trading med Finnhub
‚îú‚îÄ‚îÄ modules/                     # Alla k√§rnmoduler (37 stycken)
‚îÇ   ‚îú‚îÄ‚îÄ finnhub_orchestrator.py       # üÜï Sprint 9: Central orchestrator
‚îÇ   ‚îú‚îÄ‚îÄ indicator_synth_engine.py     # üÜï Sprint 9: Indikatorsyntes
‚îÇ   ‚îú‚îÄ‚îÄ symbol_rotation_engine.py     # üÜï Sprint 9: Symbolrotation
‚îÇ   ‚îú‚îÄ‚îÄ rotation_strategy_engine.py   # üÜï Sprint 9: Rotationsstrategi
‚îÇ   ‚îú‚îÄ‚îÄ stream_strategy_agent.py      # üÜï Sprint 9: RL stream-agent
‚îÇ   ‚îú‚îÄ‚îÄ stream_replay_engine.py       # üÜï Sprint 9: Replay engine
‚îÇ   ‚îú‚îÄ‚îÄ stream_ontology_mapper.py     # üÜï Sprint 9: Data mapping
‚îÇ   ‚îú‚îÄ‚îÄ data_ingestion.py        # Live WebSocket fr√•n Finnhub
‚îÇ   ‚îú‚îÄ‚îÄ data_ingestion_sim.py    # Simulerad marknadsdata f√∂r demo
‚îÇ   ‚îú‚îÄ‚îÄ reward_tuner.py          # Sprint 4.4: Reward transformation
‚îÇ   ‚îú‚îÄ‚îÄ rl_controller.py         # Sprint 2, 4.2: PPO-agenter
‚îÇ   ‚îú‚îÄ‚îÄ dqn_controller.py        # Sprint 8: DQN RL
‚îÇ   ‚îú‚îÄ‚îÄ gan_evolution_engine.py  # Sprint 8: GAN evolution
‚îÇ   ‚îú‚îÄ‚îÄ gnn_timespan_analyzer.py # Sprint 8: GNN temporal analysis
‚îÇ   ‚îú‚îÄ‚îÄ consensus_engine.py      # Sprint 5: Konsensusbeslut
‚îÇ   ‚îú‚îÄ‚îÄ timespan_tracker.py      # Sprint 6: Timeline-analys
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ dashboards/                  # Dash-visualiseringar (komponenter)
‚îú‚îÄ‚îÄ tests/                       # 368 tester (100% pass rate)
‚îÇ   ‚îî‚îÄ‚îÄ test_finnhub_orchestrator.py  # üÜï 25 orchestrator-tester
‚îú‚îÄ‚îÄ docs/                        # Dokumentation och YAML-specs
‚îÇ   ‚îú‚îÄ‚îÄ finnhub_orchestrator.yaml     # üÜï Orchestrator spec
‚îÇ   ‚îú‚îÄ‚îÄ dashboard_structure_sprint8.yaml  # Dashboard spec
‚îÇ   ‚îú‚îÄ‚îÄ adaptive_parameters_sprint8.yaml  # Parameter spec
‚îÇ   ‚îú‚îÄ‚îÄ sprint_8.yaml                     # Sprint 8 overview
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ logs/
‚îÇ   ‚îî‚îÄ‚îÄ orchestrator_audit.json       # üÜï Orchestrator audit log
‚îî‚îÄ‚îÄ requirements.txt
```

---

## üß™ Testning

```bash
# K√∂r alla tester
pytest tests/ -v

# K√∂r specifika test-suiter
pytest tests/test_finnhub_orchestrator.py -v    # Sprint 9: Orchestrator (25 tester)
pytest tests/test_reward_tuner.py -v              # Sprint 4.4
pytest tests/test_adaptive_parameters_sprint4_3.py -v  # Sprint 4.3
pytest tests/test_consensus_engine.py -v          # Sprint 5
pytest tests/test_timespan_tracker.py -v          # Sprint 6

# Med coverage
pytest tests/ --cov=modules --cov-report=html
```

**Testresultat:** ‚úÖ 368/368 tester passerar

---

## üìà Prestanda och Metriker

### Reward Transformation (Sprint 4.4)
- Base rewards: 50
- Tuned rewards: 50 (1:1 match)
- Volatilitet: 31.31 genomsnitt, 48.75 senaste
- Transformation ratio: 0.67 (33% reduktion vid h√∂g volatilitet)
- **Resultat:** Stabilare RL-tr√§ning, b√§ttre generalisering

### Konsensus (Sprint 5)
- 1000 beslut processade
- Robusthet: 0.88 genomsnitt
- Konsensus confidence: 0.19 (konservativ trading)
- **Resultat:** Risk-medvetet beslutsfattande

### System Health
- Module health score: 0.95+ (95%+)
- 214/214 tester passerar
- Alla 26 moduler aktiva

---

## üîó Integrationer och API

### Finnhub API
- WebSocket f√∂r realtidsdata
- REST API f√∂r indikatorer
- Kr√§ver API-nyckel (gratis tier tillr√§cklig)

### Message Bus
- Central pub/sub-kommunikation
- 20+ topics f√∂r modul-kommunikation
- Event logging f√∂r debugging

---

## üìö Detaljerad Dokumentation

F√∂r detaljerad information om sprintar, implementationer och arkitektur:

- **Sprint-dokumentation:** Se `README_detailed_backup.md`
- **YAML-specifikationer:** Se `docs/` f√∂r alla system-specs
- **Test-dokumentation:** Se `docs/reward_tuner_sprint4_4/rl_test_suite.yaml`

---

## ü§ù Sprint-sammanfattning

| Sprint | Fokus | Nyckelfunktioner |
|--------|-------|------------------|
| **1** | K√§rnsystem | WebSocket, Strategy, Execution, Portfolio |
| **2** | RL | PPO-agenter, Reward flow, Agent training |
| **3** | Feedback | Feedback routing, Analyzer, Introspection |
| **4** | Memory & Evolution | Strategic memory, Agent evolution, Versions |
| **4.2** | Adaptiv RL | Meta-parametrar (4 stycken) |
| **4.3** | Modulparametrar | 9 adaptiva modulparametrar |
| **4.4** | Reward Tuner | Reward transformation, Volatility control |
| **5** | Konsensus | Decision simulator, Voting, 4 consensus models |
| **6** | Timeline | Timeline tracking, Action chains, System monitor |
| **7** | Visualisering | **analyzer_debug.py**, Resource planner, Teams |
| **8** | Hybrid RL & Deep Learning | DQN, GAN, GNN, Temporal intelligence |
| **9** | Finnhub Orchestrator | RL-driven symbolrotation och datakoordinering |
| **10** | Decision Transformer | Sequence-based RL med transformer-arkitektur |

---

## üÜï Sprint 10: Decision Transformer ‚Äì Sequence-Based RL

Sprint 10 integrerar Decision Transformer (DT) f√∂r sekvensbaserad reinforcement learning:

### Nya Moduler

**1. Decision Transformer Agent (`decision_transformer_agent.py`)**
- Transformer-arkitektur f√∂r sekvensbaserad RL
- Multi-head attention mechanism f√∂r temporal dependencies
- Processar (state, action, reward, return-to-go) sekvenser
- Offline learning fr√•n historiska trajectories
- Integreras i 5-agent ensemble med PPO, DQN, GAN, GNN

**2. Ensemble Coordinator (`ensemble_coordinator.py`)**
- Koordinerar beslut fr√•n alla agenter (PPO, DQN, DT, GAN, GNN)
- Weighted voting f√∂r final decisions
- Konfliktdetektion och resolution
- Performance tracking per agent
- Adaptiva vikter baserat p√• agent performance

### Decision Transformer Funktioner

**Transformer Architecture:**
- State embeddings: Linear projection till embed_dim
- Action embeddings: Linear projection till embed_dim
- Return-to-go embeddings: Target return representation
- Positional encoding: F√∂r temporal order
- Multi-head attention: 4 heads f√∂r parallel attention
- 3 transformer layers: Deep sequence modeling
- Action prediction head: Final action fr√•n state embedding

**Sequence Processing:**
- Max sequence length: 20 timesteps
- Return-to-go calculation: Discounted cumulative rewards
- Causal masking: Prevent future information leakage
- Batch training: 32 sequences per batch
- Experience replay: 1000 sequence buffer

**Integration Points:**
- Strategic Memory Engine: Provides decision histories
- Reward Tuner: Supplies tuned rewards for training
- Message Bus: Publishes actions and metrics
- Ensemble Coordinator: Participates in voting

### 5-Agent Ensemble Architecture

**Agent Weights (default):**
- PPO: 30% - Policy gradient optimization
- DQN: 30% - Q-value optimization
- DT: 20% - Sequence-based decisions
- GAN: 10% - Evolution guidance
- GNN: 10% - Temporal pattern insights

**Conflict Resolution:**
- Weighted average voting
- Confidence-based weighting
- Agreement score calculation
- Entropy-based clarity measure
- Adaptive weight adjustment

**Performance Tracking:**
- Individual agent rewards
- Prediction accuracy per agent
- Conflict frequency monitoring
- Ensemble diversity metrics
- Agent contribution analysis

### Dashboard Integration

**DT Analysis Panel (`dt_analysis_panel.yaml`):**
1. **Action Predictions** - Current action, confidence, probability distribution
2. **Return-to-Go Tracking** - Target vs predicted RTG, achievement rate
3. **Attention Analysis** - Multi-head attention heatmap, per-layer distribution
4. **Training Progress** - Loss curves, training steps, buffer utilization
5. **Agent Comparison** - Performance comparison across PPO, DQN, DT, GAN, GNN
6. **Sequence Visualization** - Decision sequence timeline, state-action space

### Adaptive Parameters

**DT-specific (controlled by RL):**
- dt_learning_rate: 0.00001 - 0.001 (default 0.0001)
- dt_sequence_length: 10 - 50 (default 20)
- dt_num_layers: 2 - 6 (default 3)
- dt_target_return_weight: 0.5 - 2.0 (default 1.0)
- dt_embed_dim: 64 - 256 (default 128)
- dt_num_heads: 2 - 8 (default 4)
- dt_dropout: 0.0 - 0.3 (default 0.1)

**Ensemble weights:**
- ppo_weight, dqn_weight, dt_weight, gan_weight, gnn_weight
- Constraint: Sum to 1.0
- Adaptive adjustment based on performance

### Testning

**26 nya tester f√∂r Decision Transformer:**
- Transformer block tests (2)
- DT model tests (3)
- DT agent tests (19)
- Integration tests (2)

**Total testning:** 396/396 tester passerar (100%)

---

## üÜï Sprint 8: DQN, GAN, GNN ‚Äì Hybridiserad RL & Temporal Intelligence

Sprint 8 integrerar avancerade deep learning-tekniker f√∂r f√∂rb√§ttrad beslutsfattande och agentevolution:

### Nya Moduler

**1. DQN Controller (`dqn_controller.py`)**
- Deep Q-Network f√∂r reinforcement learning
- Experience replay buffer f√∂r stabil tr√§ning
- Target network f√∂r stable Q-value estimation
- Epsilon-greedy exploration strategy
- K√∂rs parallellt med PPO f√∂r hybrid RL

**2. GAN Evolution Engine (`gan_evolution_engine.py`)**
- Generative Adversarial Network f√∂r agentevolution
- Generator: Skapar nya agentparameterkandidater
- Discriminator: Bed√∂mer kvalitet mot historisk performance
- Integrerar med meta_agent_evolution_engine
- Evolution threshold f√∂r kvalitetskontroll

**3. GNN Timespan Analyzer (`gnn_timespan_analyzer.py`)**
- Graph Neural Network f√∂r temporal m√∂nsteranalys
- Graph Attention Layer f√∂r viktad analys
- Identifierar 8 m√∂nstertyper: uptrend, downtrend, reversal, consolidation, breakout, breakdown, divergence, convergence
- Ger djupare insikter √§n traditionell tidsserieanalys
- Integrerar med timespan_tracker

### Hybrid RL-Arkitektur

**PPO + DQN + DT Parallell Exekvering:**
- PPO (fr√•n Sprint 2-7): Policy gradient-optimering
- DQN (Sprint 8): Q-value-optimering
- DT (Sprint 10): Sequence-based transformer
- Alla f√•r samma rewards fr√•n portfolio_manager och reward_tuner
- Koordinerad via ensemble_coordinator och message_bus
- Konfliktdetektion och resolution

**F√∂rdelar:**
- PPO: Bra f√∂r kontinuerliga √•tg√§rdsval
- DQN: Bra f√∂r diskreta beslutsrum
- DT: Utm√§rkt f√∂r sekventiellt beslutsfattande
- Kombinerat: Maximalt robust och stabilt

### GAN-driven Evolution

**Kandidatgenerering:**
- GAN tr√§nas p√• historisk agentperformance
- Generator skapar nya parameterkonfigurationer
- Discriminator filtrerar ut l√•g-kvalitet kandidater
- Endast kandidater √∂ver evolution_threshold accepteras

**Integration:**
- GAN-kandidater skickas till meta_agent_evolution_engine
- Anv√§nds f√∂r att skapa nya agentversioner
- Evolutionscykel: Performance ‚Üí GAN ‚Üí Kandidater ‚Üí Evolution ‚Üí Deployment

### GNN Temporal Intelligence

**Graph-baserad Analys:**
- Beslut, indikatorer och outcomes som noder
- Temporala relationer som edges
- Attention mechanism f√∂r viktad analys
- Identifierar komplexa m√∂nster √∂ver tid

**M√∂nstertyper:**
1. **Uptrend**: Stigande prisr√∂relse
2. **Downtrend**: Fallande prisr√∂relse
3. **Reversal**: Trendv√§ndning
4. **Consolidation**: Sidledes r√∂relse
5. **Breakout**: Brott upp√•t genom motst√•nd
6. **Breakdown**: Brott ned√•t genom support
7. **Divergence**: Pris och indikator divergerar
8. **Convergence**: Pris och indikator konvergerar

### Testresultat Sprint 8

**100 nya tester:**
- test_dqn_controller.py: 21 tester
- test_gan_evolution_engine.py: 24 tester
- test_gnn_timespan_analyzer.py: 27 tester
- test_hybrid_rl.py: 14 tester
- test_sprint8_integration.py: 14 tester

**Total testning:** 314/314 tester passerar (100%)

**T√§ckning:**
- DQN: Q-learning, replay buffer, target network, epsilon decay
- GAN: Generator, discriminator, adversarial training, kandidatfiltrering
- GNN: Graph construction, attention mechanism, pattern detection
- Hybrid RL: Parallel execution, conflict detection, reward distribution
- Integration: End-to-end scenario, regression testing

### Adaptive Parameters Sprint 8

**DQN-specifika:**
- learning_rate: 0.0001 - 0.01
- discount_factor: 0.9 - 0.999
- epsilon: 0.01 - 1.0
- epsilon_decay: 0.99 - 0.9999
- replay_buffer_size: 1000 - 100000
- batch_size: 16 - 256
- target_update_frequency: 10 - 1000

**GAN-specifika:**
- generator_lr: 0.0001 - 0.01
- discriminator_lr: 0.0001 - 0.01
- latent_dim: 16 - 256
- evolution_threshold: 0.6 - 0.95

**GNN-specifika:**
- num_layers: 2 - 5
- hidden_dim: 32 - 256
- attention_heads: 1 - 8
- temporal_window: 10 - 100

### Prestanda Sprint 8

**DQN Training:**
- Convergence: 50-100 episodes
- Loss reduction: 70-80% efter tr√§ning
- Epsilon decay: 1.0 ‚Üí 0.01 √∂ver 1000 steps

**GAN Evolution:**
- Acceptance rate: 60-80%
- Discriminator accuracy: ~50% (balanserad)
- Kandidater per generation: 3-10

**GNN Analysis:**
- Graph construction: <100ms f√∂r 20 noder
- Pattern detection: 0.7-0.9 confidence
- Temporal window: 10-100 beslut

**System Overhead:**
- Memory: <2GB totalt
- CPU: <80% under tr√§ning
- Response time: <2s f√∂r beslut

---

## üõ†Ô∏è Utveckling

### Kodstil
- Python 3.8+
- Type hints f√∂r alla funktioner
- Docstrings f√∂r alla moduler och klasser
- PEP 8-kompatibel

### CI/CD
- Automatiska tester vid varje push
- 100% test pass rate kr√§vs
- Coverage tracking

---

## üìö YAML-specifikationer och Artefakter

Fullskalig dashboard implementerar f√∂ljande YAML-specifikationer:

### Dashboard-struktur
- **`docs/dashboard_structure_sprint8.yaml`**
  - Definierar alla 10 paneler och deras komponenter
  - Layout-specifikationer (grid, columns, etc.)
  - Refresh rates och data sources
  - Responsive design guidelines
  - Accessibility features

### Adaptive Parameters
- **`docs/adaptive_parameters_sprint8.yaml`**
  - DQN-parametrar (learning_rate, epsilon, batch_size, etc.)
  - GAN-parametrar (generator_lr, discriminator_lr, latent_dim)
  - GNN-parametrar (num_layers, hidden_dim, attention_heads)
  - Hybrid RL-parametrar (weights, conflict resolution)

### Sprint Specifikationer
- **`docs/sprint_8.yaml`**
  - Sprint 8 goals och features
  - Hybrid RL architecture
  - GAN evolution strategy
  - GNN temporal analysis
  - Test requirements

### CI/CD Pipeline
- **`docs/ci_pipeline_sprint8.yaml`**
  - Test suite struktur (314 tester)
  - Stages: setup, lint, unit tests, integration, regression
  - Coverage requirements (85%+)
  - Performance metrics

### √ñvriga Referenser
- **`docs/consensus_models.yaml`** - Konsensusmodeller
- **`docs/feedback_loop_sprint1_7.yaml`** - Feedback flow
- **`docs/functions.yaml`** - Modul-funktioner
- **`docs/indicator_map.yaml`** - Tekniska indikatorer

### Mockup och Design

Dashboard designen √§r inspirerad av "Abstire Dashboard" mockup med:
- Modern dark theme (#0a0e1a background)
- Bl√•/lila f√§rgschema (#4dabf7, #845ef7)
- Card-baserad layout
- Sidebar navigation
- Real-time updates
- Responsive grid system

---

## üìù Licens och Credits

NextGen AI Trader √§r utvecklat som ett demonstrations- och utbildningssystem f√∂r:
- Reinforcement Learning i trading
- Modul√§r systemarkitektur
- Agent-baserat beslutsfattande
- Adaptiv parameterstyrning

**OBS:** Detta √§r ett simulerings- och utbildningssystem. Anv√§nd inte f√∂r verklig trading utan grundlig testning och riskbed√∂mning.
